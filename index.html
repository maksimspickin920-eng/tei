<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLBB Ball Collector | Professional Tapalka</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ====== RESET VA ASOSIY ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 13px;
            position: relative;
        }

        .container {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 10px 15px 120px;
            position: relative;
        }

        /* ====== ASOSIY STATISTIKA (FAQAT BOSH SAHIFADA) ====== */
        #mainStats {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .stat-item {
            text-align: center;
            padding: 8px 5px;
        }

        .stat-icon {
            font-size: 18px;
            margin-bottom: 5px;
            color: #FF6B00;
            filter: drop-shadow(0 0 5px rgba(255, 107, 0, 0.5));
        }

        .stat-value {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 3px;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .stat-label {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ====== ASOSIY O'YIN ZONASI ====== */
        .game-section {
            position: relative;
            margin: 25px 0 30px;
            display: flex;
            justify-content: center;
        }

        .tap-area {
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, rgba(255,107,0,1) 0%, rgba(230,81,0,1) 100%);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            box-shadow: 
                0 0 60px rgba(255, 107, 0, 0.4),
                inset 0 0 40px rgba(0, 0, 0, 0.4),
                0 0 0 4px rgba(255, 255, 255, 0.1),
                0 0 0 8px rgba(255, 107, 0, 0.2);
            transition: all 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: pulseGlow 2s infinite alternate;
        }

        @keyframes pulseGlow {
            0% { box-shadow: 0 0 60px rgba(255, 107, 0, 0.4), inset 0 0 40px rgba(0,0,0,0.4); }
            100% { box-shadow: 0 0 80px rgba(255, 107, 0, 0.6), inset 0 0 40px rgba(0,0,0,0.4); }
        }

        .tap-area:active {
            transform: scale(0.92);
            box-shadow: 
                0 0 40px rgba(255, 107, 0, 0.6),
                inset 0 0 50px rgba(0, 0, 0, 0.6);
        }

        .tap-icon {
            font-size: 50px;
            color: white;
            margin-bottom: 10px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .tap-text {
            font-size: 16px;
            font-weight: 800;
            color: white;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }

        .tap-subtext {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
        }

        /* ====== EFFEKT QISMLARI ====== */
        .particle {
            position: absolute;
            pointer-events: none;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #FFC107;
            animation: particleFloat 1s ease-out forwards;
            z-index: 100;
        }

        @keyframes particleFloat {
            0% { opacity: 1; transform: translate(0, 0) scale(1); }
            100% { opacity: 0; transform: translate(var(--tx), var(--ty)) scale(0); }
        }

        .tap-number {
            position: absolute;
            pointer-events: none;
            font-size: 24px;
            font-weight: 900;
            color: #FFC107;
            text-shadow: 
                0 0 10px #FF9800,
                0 0 20px #FF5722,
                0 2px 8px rgba(0,0,0,0.5);
            animation: numberFloat 1.2s ease-out forwards;
            z-index: 101;
        }

        @keyframes numberFloat {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-80px) scale(1.5); }
        }

        /* ====== KICHIK KVADRAT TUGMALAR ====== */
        .action-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 20px 0 25px;
        }

        .action-btn {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 10px;
            position: relative;
            overflow: hidden;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 107, 0, 0.4);
            box-shadow: 0 5px 20px rgba(255, 107, 0, 0.2);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        .action-btn i {
            font-size: 22px;
            margin-bottom: 6px;
            color: #FF6B00;
        }

        .action-btn span {
            font-size: 9px;
            font-weight: 700;
            color: white;
            text-align: center;
            line-height: 1.2;
        }

        .action-btn small {
            font-size: 7px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 3px;
        }

        /* ====== AVTOKLIKER PANELI ====== */
        .autoclicker-panel {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, rgba(33, 150, 243, 0.05) 100%);
            border: 1px solid rgba(33, 150, 243, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            display: none;
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .autoclicker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .autoclicker-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 13px;
            color: #4FC3F7;
        }

        .autoclicker-timer {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: 900;
            color: white;
            background: rgba(0, 0, 0, 0.3);
            padding: 6px 12px;
            border-radius: 10px;
        }

        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00E676, #00C853);
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }

        /* ====== REYTING SAHIFASI ====== */
        .ranking-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .section-title {
            font-size: 16px;
            font-weight: 800;
            color: white;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ranking-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .ranking-tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 11px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .ranking-tab.active {
            background: rgba(255, 107, 0, 0.2);
            color: #FF6B00;
        }

        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .rank-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px 15px;
            border-left: 4px solid #FF6B00;
        }

        .rank-position {
            font-size: 16px;
            font-weight: 900;
            color: #FF6B00;
            min-width: 40px;
        }

        .rank-info {
            flex: 1;
            margin-left: 10px;
        }

        .rank-name {
            font-weight: 700;
            font-size: 13px;
            color: white;
            margin-bottom: 3px;
        }

        .rank-stats {
            display: flex;
            gap: 15px;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
        }

        .rank-value {
            font-weight: 800;
            font-size: 14px;
            color: white;
        }

        /* ====== OLMOZLAR SAHIFASI ====== */
        .diamond-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .diamond-card {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.1) 0%, rgba(33, 150, 243, 0.05) 100%);
            border: 1px solid rgba(33, 150, 243, 0.2);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .diamond-card:hover {
            transform: translateY(-5px);
            border-color: #2196F3;
            box-shadow: 0 10px 30px rgba(33, 150, 243, 0.3);
        }

        .diamond-card.popular::before {
            content: 'üî• POPULAR';
            position: absolute;
            top: 8px;
            right: 8px;
            background: #FF6B00;
            color: white;
            font-size: 8px;
            font-weight: 800;
            padding: 3px 6px;
            border-radius: 10px;
        }

        .diamond-amount {
            font-size: 24px;
            font-weight: 900;
            color: #4FC3F7;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        .diamond-price {
            font-size: 16px;
            font-weight: 800;
            color: #FFC107;
            margin-bottom: 10px;
        }

        .diamond-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* ====== TARIX SAHIFASI ====== */
        .history-container {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-left: 3px solid #FF6B00;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(-10px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .history-type {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 12px;
            color: white;
        }

        .history-amount {
            font-weight: 900;
            font-size: 16px;
        }

        .history-details {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 3px;
        }

        .history-time {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.4);
        }

        /* ====== SOZLAMALAR SAHIFASI ====== */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .setting-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .setting-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .setting-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: #FF6B00;
        }

        .setting-name {
            font-weight: 700;
            font-size: 11px;
            color: white;
        }

        /* ====== KICHIK IKKI QATORLI PASTKI MENYU ====== */
        .bottom-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(22, 33, 62, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 8px 10px;
            z-index: 1000;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.4);
        }

        .menu-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            margin-bottom: 5px;
        }

        .menu-btn {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px;
        }

        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: #FF6B00;
            transform: translateY(-2px);
        }

        .menu-btn.active {
            background: rgba(255, 107, 0, 0.2);
            border-color: #FF6B00;
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.3);
        }

        .menu-btn i {
            font-size: 16px;
            margin-bottom: 4px;
            color: #FF6B00;
        }

        .menu-btn span {
            font-size: 8px;
            font-weight: 700;
            color: white;
            text-align: center;
            line-height: 1.1;
        }

        /* ====== OGOXLANTIRISH MODALI ====== */
        .warning-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .warning-modal {
            background: linear-gradient(135deg, #2D2D2D 0%, #1A1A1A 100%);
            width: 100%;
            max-width: 320px;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 2px solid #FFC107;
            box-shadow: 0 0 50px rgba(255, 193, 7, 0.3);
            animation: modalPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes modalPop {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .warning-icon {
            font-size: 50px;
            color: #FFC107;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        .warning-text {
            font-size: 15px;
            margin-bottom: 25px;
            color: white;
            line-height: 1.4;
        }

        .warning-buttons {
            display: flex;
            gap: 10px;
        }

        .warning-btn {
            flex: 1;
            padding: 12px;
            border-radius: 10px;
            border: none;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .warning-btn.continue {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .warning-btn.cancel {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .warning-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* ====== SAHIFA BOSHQARISHI ====== */
        .page {
            display: none;
            animation: pageFade 0.4s ease;
        }

        @keyframes pageFade {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page.active {
            display: block;
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 480px) {
            .container { padding: 10px 10px 120px; }
            .action-grid { grid-template-columns: repeat(4, 1fr); gap: 6px; }
            .diamond-grid { grid-template-columns: 1fr; }
            .settings-grid { grid-template-columns: repeat(2, 1fr); }
            .menu-row { grid-template-columns: repeat(5, 1fr); }
            .tap-area { width: 160px; height: 160px; }
            .tap-icon { font-size: 45px; }
        }
    </style>
</head>
<body>
    <!-- ASOSIY KONTEYNER -->
    <div class="container">
        <!-- ASOSIY STATISTIKA (FAQAT BOSH SAHIFADA) -->
        <div id="mainStats" class="page active" data-page="home">
            <div class="stat-item">
                <div class="stat-icon">üèÄ</div>
                <div class="stat-value" id="statBalls">0</div>
                <div class="stat-label">Ball</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">üíé</div>
                <div class="stat-value" id="statDiamonds">0</div>
                <div class="stat-label">Olmos</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-value" id="statPower">1.0x</div>
                <div class="stat-label">Kuch</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-value" id="statRank">#1</div>
                <div class="stat-label">O'rin</div>
            </div>
        </div>

        <!-- BOSH SAHIFA -->
        <div class="page active" id="page-home">
            <!-- O'YIN ZONASI -->
            <div class="game-section">
                <div class="tap-area" id="tapArea">
                    <i class="fas fa-basketball tap-icon"></i>
                    <div class="tap-text">BOSING</div>
                    <div class="tap-subtext">1 bosish = 1 ball</div>
                </div>
            </div>

            <!-- AVTOKLIKER PANELI -->
            <div class="autoclicker-panel" id="autoclickerPanel">
                <div class="autoclicker-header">
                    <div class="autoclicker-title">
                        <i class="fas fa-robot"></i>
                        <span>AVTOKLIKER ISHLAMOQDA</span>
                    </div>
                    <div class="autoclicker-timer" id="autoclickerTimer">10:00</div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="autoclickerProgress"></div>
                </div>
            </div>

            <!-- KICHIK KVADRAT TUGMALAR -->
            <div class="action-grid">
                <div class="action-btn" onclick="activateAutoClicker()">
                    <i class="fas fa-robot"></i>
                    <span>Avtokliker</span>
                    <small>100 ball</small>
                </div>
                <div class="action-btn" onclick="upgradeClick()">
                    <i class="fas fa-bolt"></i>
                    <span>Kuchni oshirish</span>
                    <small>500 ball</small>
                </div>
                <div class="action-btn" onclick="showPage('diamonds')">
                    <i class="fas fa-gem"></i>
                    <span>Olmos sotib olish</span>
                    <small>Real pullar</small>
                </div>
                <div class="action-btn" onclick="showPage('exchange')">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Almashtirish</span>
                    <small>Ball ‚Üí Olmos</small>
                </div>
                <div class="action-btn" onclick="buyMultiplier()">
                    <i class="fas fa-fire"></i>
                    <span>Ko'paytirgich</span>
                    <small>2x 5 daqiqa</small>
                </div>
                <div class="action-btn" onclick="showPage('boosts')">
                    <i class="fas fa-rocket"></i>
                    <span>Bo'sterlar</span>
                    <small>Maxsus kuch</small>
                </div>
                <div class="action-btn" onclick="inviteFriend()">
                    <i class="fas fa-user-plus"></i>
                    <span>Do'st taklif</span>
                    <small>Bonus olish</small>
                </div>
                <div class="action-btn" onclick="dailyReward()">
                    <i class="fas fa-gift"></i>
                    <span>Kunlik sovg'a</span>
                    <small>Har 24 soatda</small>
                </div>
            </div>
        </div>

        <!-- REYTING SAHIFASI -->
        <div class="page" id="page-ranking">
            <div class="ranking-section">
                <div class="section-title">REYTING</div>
                <div class="ranking-tabs">
                    <div class="ranking-tab active" onclick="showRanking('time')">Vaqt bo'yicha</div>
                    <div class="ranking-tab" onclick="showRanking('balls')">Ball bo'yicha</div>
                </div>
                <div class="ranking-list" id="rankingList">
                    <!-- Reyting yuklanadi -->
                </div>
            </div>
        </div>

        <!-- OLMOZLAR SAHIFASI -->
        <div class="page" id="page-diamonds">
            <div class="ranking-section">
                <div class="section-title">OLMOS PAKETLARI</div>
                <div class="diamond-grid" id="diamondGrid">
                    <!-- Olmos paketlari yuklanadi -->
                </div>
            </div>
        </div>

        <!-- ALMASHTIRISH SAHIFASI -->
        <div class="page" id="page-exchange">
            <div class="ranking-section">
                <div class="section-title">BALL ‚Üí OLMOS</div>
                <div style="text-align: center; padding: 30px 20px;">
                    <div style="font-size: 50px; color: #FF6B00; margin-bottom: 20px;">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div style="font-size: 18px; color: #FF6B00; margin-bottom: 15px; font-weight: 800;">
                        TEZ KUNDA!
                    </div>
                    <div style="font-size: 13px; color: rgba(255, 255, 255, 0.7); line-height: 1.6;">
                        Ballarni olmosga almashtirish funksiyasi hozircha ishlamaydi.<br>
                        Ushbu funksiya tez orada ishga tushiriladi.<br>
                        Yangiliklar uchun admin bilan bog'laning: @laz1z0v1ch
                    </div>
                </div>
            </div>
        </div>

        <!-- BO'STERLAR SAHIFASI -->
        <div class="page" id="page-boosts">
            <div class="ranking-section">
                <div class="section-title">BO'STERLAR</div>
                <div class="action-grid">
                    <div class="action-btn" onclick="buyBoost('2x', 2000)">
                        <i class="fas fa-bolt"></i>
                        <span>2x Ko'paytirgich</span>
                        <small>5 daqiqa ‚Ä¢ 2000 ball</small>
                    </div>
                    <div class="action-btn" onclick="buyBoost('3x', 5000)">
                        <i class="fas fa-bolt"></i>
                        <span>3x Ko'paytirgich</span>
                        <small>3 daqiqa ‚Ä¢ 5000 ball</small>
                    </div>
                    <div class="action-btn" onclick="buyBoost('speed', 3000)">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Tezlik bo'steri</span>
                        <small>10 daqiqa ‚Ä¢ 3000 ball</small>
                    </div>
                    <div class="action-btn" onclick="buyBoost('auto', 10000)">
                        <i class="fas fa-robot"></i>
                        <span>Kuchli avtokliker</span>
                        <small>30 daqiqa ‚Ä¢ 10000 ball</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- TARIX SAHIFASI -->
        <div class="page" id="page-history">
            <div class="ranking-section">
                <div class="section-title">AMALLAR TARIXI</div>
                <div class="history-container" id="historyContainer">
                    <!-- Tarix yuklanadi -->
                </div>
            </div>
        </div>

        <!-- SOZLAMALAR SAHIFASI -->
        <div class="page" id="page-settings">
            <div class="ranking-section">
                <div class="section-title">SOZLAMALAR VA QO'LLAB-QUVVATLASH</div>
                <div class="settings-grid">
                    <div class="setting-card" onclick="changeTheme('default')">
                        <div class="setting-icon">
                            <i class="fas fa-palette"></i>
                        </div>
                        <div class="setting-name">Mavzular</div>
                    </div>
                    <div class="setting-card" onclick="exportData()">
                        <div class="setting-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <div class="setting-name">Ma'lumotlarni saqlash</div>
                    </div>
                    <div class="setting-card" onclick="importData()">
                        <div class="setting-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <div class="setting-name">Ma'lumotlarni yuklash</div>
                    </div>
                    <div class="setting-card" onclick="clearProgress()">
                        <div class="setting-icon">
                            <i class="fas fa-trash"></i>
                        </div>
                        <div class="setting-name">Progressni tozalash</div>
                    </div>
                    <div class="setting-card" onclick="contactSupport()">
                        <div class="setting-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <div class="setting-name">Qo'llab-quvvatlash</div>
                    </div>
                    <div class="setting-card" onclick="aboutGame()">
                        <div class="setting-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="setting-name">O'yin haqida</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- KICHIK IKKI QATORLI PASTKI MENYU -->
    <div class="bottom-menu">
        <div class="menu-row">
            <div class="menu-btn active" onclick="showPage('home')">
                <i class="fas fa-home"></i>
                <span>Asosiy</span>
            </div>
            <div class="menu-btn" onclick="showPage('ranking')">
                <i class="fas fa-trophy"></i>
                <span>Reyting</span>
            </div>
            <div class="menu-btn" onclick="showPage('diamonds')">
                <i class="fas fa-gem"></i>
                <span>Olmoslar</span>
            </div>
            <div class="menu-btn" onclick="showPage('boosts')">
                <i class="fas fa-rocket"></i>
                <span>Bo'sterlar</span>
            </div>
            <div class="menu-btn" onclick="showPage('history')">
                <i class="fas fa-history"></i>
                <span>Tarix</span>
            </div>
        </div>
        <div class="menu-row">
            <div class="menu-btn" onclick="showPage('exchange')">
                <i class="fas fa-exchange-alt"></i>
                <span>Almashtirish</span>
            </div>
            <div class="menu-btn" onclick="dailyReward()">
                <i class="fas fa-gift"></i>
                <span>Sovg'a</span>
            </div>
            <div class="menu-btn" onclick="inviteFriend()">
                <i class="fas fa-user-plus"></i>
                <span>Taklif</span>
            </div>
            <div class="menu-btn" onclick="showPage('settings')">
                <i class="fas fa-cog"></i>
                <span>Sozlamalar</span>
            </div>
            <div class="menu-btn" onclick="showNotifications()">
                <i class="fas fa-bell"></i>
                <span>Bildirish</span>
            </div>
        </div>
    </div>

    <!-- OGOXLANTIRISH MODALI -->
    <div class="warning-overlay" id="warningOverlay">
        <div class="warning-modal">
            <div class="warning-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="warning-text">
                <strong>EHTIYOT BO'LING!</strong><br>
                Avtokliker hozir ishlamoqda.<br>
                Agar sahifadan chiqsangiz, avtokliker to'xtaydi.
            </div>
            <div class="warning-buttons">
                <button class="warning-btn continue" onclick="continueAutoclicker()">
                    <i class="fas fa-play"></i> DAVOM ETISH
                </button>
                <button class="warning-btn cancel" onclick="cancelAutoclicker()">
                    <i class="fas fa-stop"></i> BEKOR QILISH
                </button>
            </div>
        </div>
    </div>

    <script>
        // ====== ASOSIY O'ZGARUVCHILAR ======
        let balls = 0;
        let diamonds = 0;
        let clickPower = 1.0;
        let totalClicks = 0;
        let gameTime = 0;
        let autoclickerActive = false;
        let autoclickerTime = 0;
        let autoclickerInterval = null;
        let currentMultiplier = 1;
        let multiplierActive = false;
        let history = [];
        let currentRank = '#1';
        let selectedPackage = null;
        let warningShown = false;

        // Olmos paketlari
        const diamondPackages = [
            { id: 1, diamonds: 5, price: 1800, label: '5 OLMOZ' },
            { id: 2, diamonds: 11, price: 3000, label: '11 OLMOZ', popular: true },
            { id: 3, diamonds: 22, price: 5000, label: '22 OLMOZ', popular: true },
            { id: 4, diamonds: 56, price: 11500, label: '56 OLMOZ' },
            { id: 5, diamonds: 86, price: 16500, label: '86 OLMOZ' },
            { id: 6, diamonds: 112, price: 21500, label: '112 OLMOZ' },
            { id: 7, diamonds: 172, price: 34500, label: '172 OLMOZ', popular: true },
            { id: 8, diamonds: 257, price: 49000, label: '257 OLMOZ' }
        ];

        // ====== SAHIFA BOSHQARISHI ======
        function showPage(pageId) {
            // Barcha sahifalarni yashirish
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Barcha menu tugmalarini yashirish
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Asosiy statistika faqat bosh sahifada ko'rsatiladi
            document.getElementById('mainStats').style.display = pageId === 'home' ? 'block' : 'none';
            
            // Tanlangan sahifani ko'rsatish
            document.getElementById(`page-${pageId}`).classList.add('active');
            
            // Menu tugmasini faollashtirish
            const menuBtn = document.querySelector(`.menu-btn[onclick="showPage('${pageId}')"]`);
            if (menuBtn) {
                menuBtn.classList.add('active');
            }
            
            // Sahifaga o'tganda ma'lumotlarni yangilash
            updatePageData(pageId);
            
            // Agar avtokliker ishlayotgan bo'lsa, sahifa o'zgarishini tekshirish
            if (autoclickerActive && !warningShown && pageId !== 'home') {
                showWarning();
                return false;
            }
            
            return true;
        }

        function updatePageData(pageId) {
            // Har bir sahifada ma'lumotlarni yangilash
            switch(pageId) {
                case 'ranking':
                    loadRanking();
                    break;
                case 'diamonds':
                    loadDiamondPackages();
                    break;
                case 'history':
                    loadHistory();
                    break;
                case 'boosts':
                    // Bo'sterlar sahifasi uchun hech narsa qilish shart emas
                    break;
            }
            
            // Statistika yangilash
            updateStats();
        }

        function updateStats() {
            // Asosiy statistika
            document.getElementById('statBalls').textContent = formatNumber(balls);
            document.getElementById('statDiamonds').textContent = formatNumber(diamonds);
            document.getElementById('statPower').textContent = clickPower.toFixed(1) + 'x';
            document.getElementById('statRank').textContent = currentRank;
        }

        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num;
        }

        // ====== BOSISH FUNKSIYALARI ======
        document.getElementById('tapArea').addEventListener('click', function(e) {
            const earned = Math.floor(1 * clickPower * currentMultiplier);
            balls += earned;
            totalClicks++;
            
            // Bosish effektlarini yaratish
            createTapEffects(e, earned);
            
            // Statistika yangilash
            updateStats();
            
            // Tarixga qo'shish
            addToHistory('tap', `${earned} ball to'plandi`, earned);
            
            // Har 50 bosishda bildirishnoma
            if (totalClicks % 50 === 0) {
                showNotification(`üéØ ${totalClicks} ta bosish! +${earned * 5} bonus ball`);
                balls += earned * 5;
                updateStats();
            }
            
            // Reytingni yangilash
            updateRanking();
        });

        function createTapEffects(event, amount) {
            const rect = document.getElementById('tapArea').getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;
            
            // Raqam effekti
            const numberEffect = document.createElement('div');
            numberEffect.className = 'tap-number';
            numberEffect.textContent = `+${amount}`;
            numberEffect.style.left = `${x}px`;
            numberEffect.style.top = `${y}px`;
            document.querySelector('.game-section').appendChild(numberEffect);
            
            setTimeout(() => {
                numberEffect.remove();
            }, 1200);
            
            // Qismchalar effekti
            for (let i = 0; i < 12; i++) {
                createParticle(x, y);
            }
            
            // To'pni kichraytirish effekti
            const tapArea = document.getElementById('tapArea');
            tapArea.style.transform = 'scale(0.95)';
            setTimeout(() => {
                tapArea.style.transform = 'scale(1)';
            }, 100);
        }

        function createParticle(x, y) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            // Tasodifiy yo'nalish
            const angle = Math.random() * Math.PI * 2;
            const speed = 50 + Math.random() * 100;
            const tx = Math.cos(angle) * speed;
            const ty = Math.sin(angle) * speed;
            
            particle.style.setProperty('--tx', `${tx}px`);
            particle.style.setProperty('--ty', `${ty}px`);
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            
            // Tasodifiy rang
            const colors = ['#FF6B00', '#FFC107', '#4CAF50', '#2196F3', '#9C27B0'];
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            // Tasodifiy o'lcham
            const size = 4 + Math.random() * 8;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            document.querySelector('.game-section').appendChild(particle);
            
            setTimeout(() => {
                particle.remove();
            }, 1000);
        }

        // ====== AVTOKLIKER FUNKSIYALARI ======
        function activateAutoClicker() {
            if (autoclickerActive) {
                showNotification('‚ö†Ô∏è Avtokliker allaqachon ishlayapti!');
                return;
            }
            
            const cost = 100;
            
            if (balls >= cost) {
                balls -= cost;
                autoclickerActive = true;
                autoclickerTime = 10 * 60; // 10 daqiqa
                
                // Avtokliker panelini ko'rsatish
                document.getElementById('autoclickerPanel').style.display = 'block';
                updateAutoclickerUI();
                
                // Avtokliker intervalini boshlash
                startAutoclicker();
                
                // UI ni yangilash
                updateStats();
                
                // Tarixga qo'shish
                addToHistory('autoclicker', 'Avtokliker sotib olindi', -cost);
                
                // Bildirishnoma
                showNotification('ü§ñ Avtokliker faollashtirildi! (10 daqiqa)');
            } else {
                showNotification(`‚ùå ${cost} ball kerak!`);
            }
        }

        function startAutoclicker() {
            if (autoclickerInterval) clearInterval(autoclickerInterval);
            
            autoclickerInterval = setInterval(() => {
                if (!autoclickerActive) return;
                
                autoclickerTime--;
                updateAutoclickerUI();
                
                // Avtomatik ball qo'shish
                const earned = Math.floor(1 * clickPower * currentMultiplier);
                balls += earned;
                totalClicks++;
                updateStats();
                
                // Tasodifiy joyda effekt yaratish
                createRandomEffect(earned);
                
                // Vaqt tugasa, avtoklikerni to'xtatish
                if (autoclickerTime <= 0) {
                    deactivateAutoclicker();
                }
            }, 1000);
        }

        function updateAutoclickerUI() {
            const minutes = Math.floor(autoclickerTime / 60);
            const seconds = autoclickerTime % 60;
            document.getElementById('autoclickerTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Progress bari
            const progress = ((10 * 60 - autoclickerTime) / (10 * 60)) * 100;
            document.getElementById('autoclickerProgress').style.width = `${progress}%`;
        }

        function createRandomEffect(amount) {
            const area = document.querySelector('.game-section');
            const rect = area.getBoundingClientRect();
            const x = Math.random() * rect.width;
            const y = Math.random() * rect.height;
            
            // Mini effekt
            const effect = document.createElement('div');
            effect.className = 'tap-number';
            effect.textContent = `+${amount}`;
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            effect.style.fontSize = '18px';
            
            area.appendChild(effect);
            
            setTimeout(() => {
                effect.remove();
            }, 800);
        }

        function deactivateAutoclicker() {
            autoclickerActive = false;
            if (autoclickerInterval) {
                clearInterval(autoclickerInterval);
                autoclickerInterval = null;
            }
            document.getElementById('autoclickerPanel').style.display = 'none';
            showNotification('üõë Avtokliker to\'xtatildi');
        }

        // ====== OGOXLANTIRISH TIZIMI ======
        function showWarning() {
            if (autoclickerActive && !warningShown) {
                document.getElementById('warningOverlay').style.display = 'flex';
                warningShown = true;
                return true;
            }
            return false;
        }

        function continueAutoclicker() {
            document.getElementById('warningOverlay').style.display = 'none';
            warningShown = false;
        }

        function cancelAutoclicker() {
            deactivateAutoclicker();
            document.getElementById('warningOverlay').style.display = 'none';
            warningShown = false;
        }

        // ====== KUCH OSHIRISH ======
        function upgradeClick() {
            const cost = 500;
            
            if (balls >= cost) {
                balls -= cost;
                clickPower += 0.2;
                clickPower = Math.round(clickPower * 10) / 10;
                
                updateStats();
                addToHistory('upgrade', `Kuch oshirildi: ${clickPower.toFixed(1)}x`, -cost);
                showNotification(`‚ö° Kuch: ${clickPower.toFixed(1)}x`);
                
                // Effekt
                document.getElementById('tapArea').style.boxShadow = '0 0 80px rgba(255, 107, 0, 0.8)';
                setTimeout(() => {
                    document.getElementById('tapArea').style.boxShadow = '';
                }, 500);
            } else {
                showNotification(`‚ùå ${cost} ball kerak!`);
            }
        }

        // ====== KO'PAYTIRGICH ======
        function buyMultiplier() {
            const cost = 2000;
            
            if (balls >= cost) {
                balls -= cost;
                const oldMultiplier = currentMultiplier;
                currentMultiplier = 2;
                multiplierActive = true;
                
                addToHistory('multiplier', '2x ko ªpaytirgich faollashtirildi', -cost);
                showNotification('üî• 2x ko ªpaytirgich faollashtirildi! (5 daqiqa)');
                updateStats();
                
                // To'p rangini o'zgartirish
                document.getElementById('tapArea').style.background = 
                    'radial-gradient(circle, rgba(255,193,7,1) 0%, rgba(255,152,0,1) 100%)';
                
                // 5 daqiqadan keyin asl holatiga qaytarish
                setTimeout(() => {
                    currentMultiplier = oldMultiplier;
                    multiplierActive = false;
                    document.getElementById('tapArea').style.background = 
                        'radial-gradient(circle, rgba(255,107,0,1) 0%, rgba(230,81,0,1) 100%)';
                    showNotification('üîÑ Ko ªpaytirgich tugadi');
                }, 5 * 60 * 1000);
            } else {
                showNotification(`‚ùå ${cost} ball kerak!`);
            }
        }

        // ====== BO'STERLAR ======
        function buyBoost(type, cost) {
            if (balls >= cost) {
                balls -= cost;
                
                switch(type) {
                    case '2x':
                        activateMultiplierBoost(2, 300);
                        addToHistory('boost', '2x ko ªpaytirgich (5 daqiqa)', -cost);
                        showNotification('üî• 2x ko ªpaytirgich faollashtirildi!');
                        break;
                    case '3x':
                        activateMultiplierBoost(3, 180);
                        addToHistory('boost', '3x ko ªpaytirgich (3 daqiqa)', -cost);
                        showNotification('üî• 3x ko ªpaytirgich faollashtirildi!');
                        break;
                    case 'speed':
                        activateSpeedBoost(2, 600);
                        addToHistory('boost', 'Tezlik bo ªsteri (10 daqiqa)', -cost);
                        showNotification('üöÄ Tezlik bo ªsteri faollashtirildi!');
                        break;
                    case 'auto':
                        activateAutoBoost();
                        addToHistory('boost', 'Kuchli avtokliker (30 daqiqa)', -cost);
                        showNotification('ü§ñ Kuchli avtokliker faollashtirildi!');
                        break;
                }
                
                updateStats();
            } else {
                showNotification(`‚ùå ${cost} ball kerak!`);
            }
        }

        function activateMultiplierBoost(multiplier, duration) {
            const oldMultiplier = currentMultiplier;
            currentMultiplier = multiplier;
            
            // To'p rangini o'zgartirish
            const colors = {
                2: ['rgba(255,193,7,1)', 'rgba(255,152,0,1)'],
                3: ['rgba(255,87,34,1)', 'rgba(244,67,54,1)']
            };
            
            document.getElementById('tapArea').style.background = 
                `radial-gradient(circle, ${colors[multiplier][0]} 0%, ${colors[multiplier][1]} 100%)`;
            
            // Vaqt tugashi
            setTimeout(() => {
                currentMultiplier = oldMultiplier;
                document.getElementById('tapArea').style.background = 
                    'radial-gradient(circle, rgba(255,107,0,1) 0%, rgba(230,81,0,1) 100%)';
                showNotification('üîÑ Bo ªster tugadi');
            }, duration * 1000);
        }

        function activateSpeedBoost(speed, duration) {
            const oldSpeed = clickPower;
            clickPower *= speed;
            
            // Animatsiya
            document.getElementById('tapArea').style.animation = 'pulseGlow 0.5s infinite alternate';
            
            // Vaqt tugashi
            setTimeout(() => {
                clickPower = oldSpeed;
                document.getElementById('tapArea').style.animation = '';
                updateStats();
                showNotification('üîÑ Tezlik bo ªsteri tugadi');
            }, duration * 1000);
        }

        function activateAutoBoost() {
            if (autoclickerActive) {
                deactivateAutoclicker();
            }
            
            balls += 10000; // Bonus beramiz
            activateAutoClicker();
            
            // 30 daqiqaga o'rnatamiz
            autoclickerTime = 30 * 60;
            updateAutoclickerUI();
        }

        // ====== REYTING FUNKSIYALARI ======
        function showRanking(type) {
            // Tablarni yangilash
            document.querySelectorAll('.ranking-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reytingni yuklash
            loadRanking(type);
        }

        function loadRanking(type = 'time') {
            const rankingList = document.getElementById('rankingList');
            
            // Demo foydalanuvchilar (faqat real)
            let users = [
                {
                    name: 'Siz',
                    balls: balls,
                    time: gameTime,
                    isCurrent: true
                }
            ];
            
            // Agar localStorageda do'stlar bo'lsa, ularni qo'shamiz
            const invitedUsers = JSON.parse(localStorage.getItem('invitedUsers') || '[]');
            invitedUsers.forEach((user, index) => {
                users.push({
                    name: `Do'st ${index + 1}`,
                    balls: Math.floor(balls * 0.7 * Math.random()), // Sizning ballingizdan kamroq
                    time: Math.floor(gameTime * 0.8 * Math.random()),
                    isCurrent: false
                });
            });
            
            // Saralash
            if (type === 'time') {
                users.sort((a, b) => b.time - a.time);
            } else {
                users.sort((a, b) => b.balls - a.balls);
            }
            
            // HTML yaratish
            rankingList.innerHTML = users.map((user, index) => `
                <div class="rank-item" style="border-left-color: ${user.isCurrent ? '#FF6B00' : '#2196F3'};">
                    <div class="rank-position">${index + 1}</div>
                    <div class="rank-info">
                        <div class="rank-name">${user.name}</div>
                        <div class="rank-stats">
                            <span>Ball: ${formatNumber(user.balls)}</span>
                            <span>Vaqt: ${formatTime(user.time)}</span>
                        </div>
                    </div>
                    <div class="rank-value">${type === 'time' ? formatTime(user.time) : formatNumber(user.balls)}</div>
                </div>
            `).join('');
        }

        function updateRanking() {
            // Reytingni yangilash
            if (balls >= 100000) currentRank = '#1';
            else if (balls >= 50000) currentRank = '#2';
            else if (balls >= 25000) currentRank = '#3';
            else if (balls >= 10000) currentRank = '#4';
            else if (balls >= 5000) currentRank = '#5';
            else currentRank = '#6+';
            
            updateStats();
        }

        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            
            if (hours > 0) {
                return `${hours} soat`;
            } else if (minutes > 0) {
                return `${minutes} daqiqa`;
            } else {
                return `${seconds} soniya`;
            }
        }

        // ====== OLMOZLAR FUNKSIYALARI ======
        function loadDiamondPackages() {
            const diamondGrid = document.getElementById('diamondGrid');
            diamondGrid.innerHTML = '';
            
            diamondPackages.forEach(pkg => {
                const card = document.createElement('div');
                card.className = `diamond-card ${pkg.popular ? 'popular' : ''}`;
                card.onclick = () => selectDiamondPackage(pkg.id);
                
                card.innerHTML = `
                    <div class="diamond-amount">${pkg.diamonds}</div>
                    <div class="diamond-price">${pkg.price.toLocaleString()} so'm</div>
                    <div class="diamond-label">${pkg.label}</div>
                `;
                
                diamondGrid.appendChild(card);
            });
        }

        function selectDiamondPackage(packageId) {
            selectedPackage = packageId;
            
            // Barcha kartalarni yangilash
            document.querySelectorAll('.diamond-card').forEach(card => {
                card.style.border = '1px solid rgba(33, 150, 243, 0.2)';
                card.style.transform = 'translateY(0)';
            });
            
            // Tanlangan kartani belgilash
            const selectedCard = document.querySelector(`.diamond-card:nth-child(${packageId})`);
            if (selectedCard) {
                selectedCard.style.border = '2px solid #2196F3';
                selectedCard.style.transform = 'translateY(-5px)';
                
                // Demo: olmoslarni qo'shish
                const pkg = diamondPackages.find(p => p.id === packageId);
                setTimeout(() => {
                    diamonds += pkg.diamonds;
                    updateStats();
                    addToHistory('purchase', `${pkg.diamonds} olmos sotib olindi`, pkg.diamonds);
                    showNotification(`‚úÖ ${pkg.diamonds} olmos hisobingizga qo'shildi!`);
                    
                    // Karta holatini tiklash
                    selectedCard.style.border = '1px solid rgba(33, 150, 243, 0.2)';
                    selectedCard.style.transform = 'translateY(0)';
                    selectedPackage = null;
                }, 1000);
            }
        }

        // ====== TARIX FUNKSIYALARI ======
        function loadHistory() {
            const historyContainer = document.getElementById('historyContainer');
            
            if (history.length === 0) {
                historyContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: rgba(255, 255, 255, 0.4);">
                        <i class="fas fa-history" style="font-size: 40px; margin-bottom: 15px; opacity: 0.3;"></i>
                        <div style="font-size: 13px;">Hozircha amallar yo'q</div>
                    </div>
                `;
                return;
            }
            
            historyContainer.innerHTML = history.map(item => `
                <div class="history-item">
                    <div class="history-header">
                        <div class="history-type">
                            ${getHistoryIcon(item.type)} ${item.description}
                        </div>
                        <div class="history-amount" style="color: ${item.amount > 0 ? '#4CAF50' : '#F44336'}">
                            ${item.amount > 0 ? '+' : ''}${item.amount}
                        </div>
                    </div>
                    <div class="history-time">${item.time}</div>
                </div>
            `).join('');
        }

        function addToHistory(type, description, amount) {
            const historyItem = {
                id: Date.now(),
                type: type,
                description: description,
                amount: amount,
                time: new Date().toLocaleTimeString('uz-UZ', { 
                    hour: '2-digit', 
                    minute: '2-digit'
                })
            };
            
            history.unshift(historyItem);
            
            // Faqat oxirgi 50 ta elementni saqlash
            if (history.length > 50) {
                history = history.slice(0, 50);
            }
            
            // Ma'lumotlarni saqlash
            saveData();
        }

        function getHistoryIcon(type) {
            const icons = {
                'tap': 'üëÜ',
                'autoclicker': 'ü§ñ',
                'upgrade': '‚ö°',
                'multiplier': 'üî•',
                'boost': 'üöÄ',
                'purchase': 'üíé',
                'reward': 'üéÅ',
                'invite': 'üë•'
            };
            return icons[type] || 'üìù';
        }

        // ====== QO'SHIMCHA FUNKSIYALAR ======
        function dailyReward() {
            const lastReward = localStorage.getItem('lastRewardDate');
            const today = new Date().toDateString();
            
            if (lastReward === today) {
                showNotification('‚ö†Ô∏è Kunlik sovg ªani allaqachon oldingiz! Ertaga qaytib keling.');
                return;
            }
            
            const reward = 500 + Math.floor(Math.random() * 500);
            balls += reward;
            updateStats();
            
            localStorage.setItem('lastRewardDate', today);
            addToHistory('reward', `Kunlik sovg'a`, reward);
            showNotification(`üéÅ Kunlik sovg'a: +${reward} ball!`);
        }

        function inviteFriend() {
            const link = 'https://t.me/mlbb_ball_bot?start=ref_' + Math.random().toString(36).substr(2, 8);
            navigator.clipboard.writeText(link);
            showNotification('üìã Taklif havolasi nusxalandi! Do'stingizga yuboring.');
            
            // Bonus
            const bonus = 100;
            balls += bonus;
            updateStats();
            addToHistory('invite', 'Do ªst taklif qilish bonusi', bonus);
        }

        function showNotifications() {
            showNotification('üîî Yangi xabarlar yo ªq. Tez orada yangilanishlar kutilmoqda!');
        }

        // ====== SOZLAMALAR FUNKSIYALARI ======
        function changeTheme(theme) {
            const themes = {
                'default': ['#FF6B00', '#E65100', 'radial-gradient(circle, rgba(255,107,0,1) 0%, rgba(230,81,0,1) 100%)'],
                'blue': ['#2196F3', '#1976D2', 'radial-gradient(circle, rgba(33,150,243,1) 0%, rgba(21,101,192,1) 100%)'],
                'green': ['#4CAF50', '#388E3C', 'radial-gradient(circle, rgba(76,175,80,1) 0%, rgba(56,142,60,1) 100%)'],
                'purple': ['#9C27B0', '#7B1FA2', 'radial-gradient(circle, rgba(156,39,176,1) 0%, rgba(123,31,162,1) 100%)'],
                'dark': ['#607D8B', '#455A64', 'radial-gradient(circle, rgba(96,125,139,1) 0%, rgba(69,90,100,1) 100%)']
            };
            
            const [primary, primaryDark, gradient] = themes[theme] || themes['default'];
            
            // CSS o'zgaruvchilarini o'zgartirish
            document.documentElement.style.setProperty('--primary', primary);
            document.documentElement.style.setProperty('--primary-dark', primaryDark);
            
            // To'p rangini o'zgartirish
            document.getElementById('tapArea').style.background = gradient;
            
            // Tugma ranglarini yangilash
            document.querySelectorAll('.action-btn i, .menu-btn i, .stat-icon').forEach(icon => {
                icon.style.color = primary;
            });
            
            showNotification(`üé® Mavzu "${theme}" ga o'zgartirildi!`);
            localStorage.setItem('mlbbTheme', theme);
        }

        function exportData() {
            const data = {
                balls: balls,
                diamonds: diamonds,
                clickPower: clickPower,
                totalClicks: totalClicks,
                gameTime: gameTime,
                history: history,
                autoclickerActive: autoclickerActive,
                autoclickerTime: autoclickerTime,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            const exportFileDefaultName = 'mlbb_backup.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('‚úÖ Ma\'lumotlar yuklab olindi');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (confirm('Haqiqatan ham ma\'lumotlarni qayta yuklamoqchimisiz? Bu joriy ma\'lumotlarni o\'chirib tashlaydi.')) {
                            balls = data.balls || 0;
                            diamonds = data.diamonds || 0;
                            clickPower = data.clickPower || 1.0;
                            totalClicks = data.totalClicks || 0;
                            gameTime = data.gameTime || 0;
                            history = data.history || [];
                            
                            if (data.autoclickerActive && data.autoclickerTime > 0) {
                                autoclickerActive = true;
                                autoclickerTime = data.autoclickerTime;
                                document.getElementById('autoclickerPanel').style.display = 'block';
                                startAutoclicker();
                            }
                            
                            updateStats();
                            updateRanking();
                            showNotification('‚úÖ Ma\'lumotlar muvaffaqiyatli yuklandi');
                        }
                    } catch (error) {
                        showNotification('‚ùå Xato: Noto\'g\'ri fayl formati');
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        function clearProgress() {
            if (confirm('Haqiqatan ham barcha progressni o\'chirmoqchimisiz? Bu amalni qaytarib bo\'lmaydi!')) {
                localStorage.clear();
                location.reload();
            }
        }

        function contactSupport() {
            const message = 'Salom! MLBB Ball Collector o\'yini haqida yordam kerak.';
            window.open('https://t.me/laz1z0v1ch?text=' + encodeURIComponent(message), '_blank');
        }

        function aboutGame() {
            showNotification('üéÆ MLBB Ball Collector\n\nBu o\'yinda siz ball to\'plab, ularni real MLBB olmoslariga almashtirishingiz mumkin!\n\nAdmin: @laz1z0v1ch\nTelefon: +998882600726');
        }

        // ====== MA'LUMOTLARNI SAQLASH ======
        function saveData() {
            const data = {
                balls: balls,
                diamonds: diamonds,
                clickPower: clickPower,
                totalClicks: totalClicks,
                gameTime: gameTime,
                history: history,
                autoclickerActive: autoclickerActive,
                autoclickerTime: autoclickerTime,
                lastRewardDate: localStorage.getItem('lastRewardDate'),
                saveTime: new Date().toISOString()
            };
            localStorage.setItem('mlbbProfessionalTapalka', JSON.stringify(data));
        }

        function loadData() {
            const saved = localStorage.getItem('mlbbProfessionalTapalka');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    balls = data.balls || 0;
                    diamonds = data.diamonds || 0;
                    clickPower = data.clickPower || 1.0;
                    totalClicks = data.totalClicks || 0;
                    gameTime = data.gameTime || 0;
                    history = data.history || [];
                    
                    // Avtoklikerni qayta tiklash
                    if (data.autoclickerActive && data.autoclickerTime > 0) {
                        autoclickerActive = true;
                        autoclickerTime = data.autoclickerTime;
                        document.getElementById('autoclickerPanel').style.display = 'block';
                        startAutoclicker();
                    }
                } catch (e) {
                    console.log('Yangi o\'yin boshlanmoqda...');
                }
            }
            
            // Mavzuni yuklash
            const savedTheme = localStorage.getItem('mlbbTheme') || 'default';
            changeTheme(savedTheme);
        }

        // ====== BILDIRISHNOMA TIZIMI ======
        function showNotification(message) {
            // Vaqtinchalik oddiy alert
            console.log('Notification:', message);
            alert(message);
        }

        // ====== DASTLABKI YUKLASH ======
        document.addEventListener('DOMContentLoaded', function() {
            // Ma'lumotlarni yuklash
            loadData();
            
            // Statistika yangilash
            updateStats();
            
            // Reytingni yangilash
            updateRanking();
            
            // O'yin vaqtini hisoblash
            setInterval(() => {
                gameTime++;
                // Har 30 soniyada ma'lumotlarni saqlash
                if (gameTime % 30 === 0) {
                    saveData();
                }
            }, 1000);
            
            // Brauzer yopilganda ma'lumotlarni saqlash
            window.addEventListener('beforeunload', function() {
                saveData();
            });
        });
    </script>
</body>
</html>
